(()=>{var E=Object.create;var g=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var U=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var _=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of A(t))!R.call(n,s)&&s!==e&&g(n,s,{get:()=>t[s],enumerable:!(r=T(t,s))||r.enumerable});return n};var x=(n,t,e)=>(e=n!=null?E(P(n)):{},_(t||!n||!n.__esModule?g(e,"default",{value:n,enumerable:!0}):e,n));var y=U(o=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.DropPolicy=void 0;o.default=O;var d=new Map,c;(function(n){n[n.Reject=0]="Reject",n[n.DropOldest=1]="DropOldest"})(c||(o.DropPolicy=c={}));var u=class{constructor(t){this.queue=[],this.timer=null,this.settings=t}};function L(n){let{id:t}=n;if(d.has(t))return d.get(t);{let e=new u(n);return d.set(t,e),e}}function O(n,t,e={id:0}){let r=e.id===0?new u(e):L(e);function s(){var l,i;(i=(l=r.queue.shift())===null||l===void 0?void 0:l.action)===null||i===void 0||i.call(l),r.queue.length===0&&r.timer!==null&&(clearInterval(r.timer),r.timer=null)}function b(...l){var i;let{maxQueueSize:f,dropPolicy:p}=r.settings,h,m,I=new Promise((a,q)=>{h=a,m=q});if(f!==void 0&&r.queue.length>=f){if(p===c.Reject)return Promise.reject(new Error("Queue is at max capacity."));p===c.DropOldest&&((i=r.queue.shift())===null||i===void 0||i.reject(new Error("Queue is at max capacity.")))}return r.queue.push({action:()=>h(n(...l)),reject:a=>{m(a)}}),r.timer===null&&(s(),r.timer=setInterval(s,t)),I}return b}});var v=x(y()),z=Object.freeze("https://data.objkt.com/v3/graphql"),S=21337,D=600;function M(n){return{operationName:"GetXUserAddress",query:"query GetXUserAddress($xLinks: [String!]!) { holder(where: { twitter: { _in: $xLinks }, flag: { _eq: none }}) {address alias}}",variables:{xLinks:n}}}function X(n){return new Promise(t=>{fetch(z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>t(e)).catch(()=>t(null))})}function G(n){return new Promise(t=>{n===null?t([]):X(M([`https://x.com/${n}`,`https://twitter.com/${n}`])).then(e=>e==null?void 0:e.data).then(e=>e==null?void 0:e.holder.map(r=>r.address)).then(e=>t(e!=null?e:[])).catch(()=>t([]))})}var w={GetXUserTezosAddresses:(0,v.default)(G,D,{id:S})};var Q='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 248 248" fill="none" xmlns:v="https://vecta.io/nano" style="margin:auto;"><rect width="248" height="248" rx="124" fill="#8c89ff"/><path d="M103.16 132.89c-11.578 11.578-11.578 30.349-.001 41.926s30.349 11.578 41.926 0 11.578-30.348 0-41.926l-12.091 12.091a12.55 12.55 0 0 1-17.743 0L103.16 132.89zm82.958.162l.164-.163c11.577-11.577 11.577-30.348 0-41.926s-30.349-11.577-41.926 0-11.578 30.349 0 41.926l.132.131-.132-.132 12.091-12.092a12.55 12.55 0 0 1 17.743 0l12.092 12.092-.164.164zm-82.356-.036l.127-.127c11.578-11.577 11.578-30.348 0-41.926s-30.348-11.577-41.926 0-11.578 30.349 0 41.926l.167.166-.167-.167 12.092-12.092a12.55 12.55 0 0 1 17.743 0l12.091 12.092-.127.128z" fill-rule="evenodd" fill="#121212"/></svg>';function $(n){var r;let t=n.closest('[data-testid="tweet"]');if(!t)return null;let e=t.querySelector('a[href^="/"][role="link"]');return e&&((r=e.getAttribute("href"))==null?void 0:r.slice(1))||null}function j(){document.querySelectorAll('[data-testid="bookmark"]').forEach(t=>{if((t==null?void 0:t.parentElement)===null||t.parentElement.querySelector(".sbjkt-button"))return;console.log();let e=document.createElement("button");e.className="sbjkt-button",e.style.background="none",e.style.border="none",e.style.marginRight="18px",e.style.cursor="pointer",e.style.padding="0",e.style.width="16px",e.style.height="20px",e.innerHTML=Q,e.style.display="none",t==null||t.parentElement.insertBefore(e,t),w.GetXUserTezosAddresses($(t)).then(r=>r).then(r=>{r.length!=0&&(e.style.display="flex",e.addEventListener("click",()=>{window.open(`https://objkt.com/users/${r[0]}`)}))})})}var H=new MutationObserver(j);H.observe(document.body,{childList:!0,subtree:!0});j();})();
