(()=>{var U=Object.create;var y=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var R=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var _=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of A(e))!P.call(n,i)&&i!==t&&y(n,i,{get:()=>e[i],enumerable:!(r=x(e,i))||r.enumerable});return n};var M=(n,e,t)=>(t=n!=null?U(L(n)):{},_(e||!n||!n.__esModule?y(t,"default",{value:n,enumerable:!0}):t,n));var v=R(o=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.DropPolicy=void 0;o.default=S;var f=new Map,c;(function(n){n[n.Reject=0]="Reject",n[n.DropOldest=1]="DropOldest"})(c||(o.DropPolicy=c={}));var u=class{constructor(e){this.queue=[],this.timer=null,this.settings=e}};function O(n){let{id:e}=n;if(f.has(e))return f.get(e);{let t=new u(n);return f.set(e,t),t}}function S(n,e,t={id:0}){let r=t.id===0?new u(t):O(t);function i(){var l,s;(s=(l=r.queue.shift())===null||l===void 0?void 0:l.action)===null||s===void 0||s.call(l),r.queue.length===0&&r.timer!==null&&(clearInterval(r.timer),r.timer=null)}function q(...l){var s;let{maxQueueSize:h,dropPolicy:p}=r.settings,m,g,E=new Promise((d,T)=>{m=d,g=T});if(h!==void 0&&r.queue.length>=h){if(p===c.Reject)return Promise.reject(new Error("Queue is at max capacity."));p===c.DropOldest&&((s=r.queue.shift())===null||s===void 0||s.reject(new Error("Queue is at max capacity.")))}return r.queue.push({action:()=>m(n(...l)),reject:d=>{g(d)}}),r.timer===null&&(i(),r.timer=setInterval(i,e)),E}return q}});var w=M(v()),z=Object.freeze("https://data.objkt.com/v3/graphql"),D=21337,X=600;function G(n){return{operationName:"GetXUserAddress",query:"query GetXUserAddress($xLinks: [String!]!) { holder(where: { twitter: { _in: $xLinks }, flag: { _eq: none }}) {address alias}}",variables:{xLinks:n}}}function Q(n){return new Promise(e=>{fetch(z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(t=>t.json()).then(t=>e(t)).catch(()=>e(null))})}function $(n){return new Promise(e=>{n===null?e([]):Q(G([`https://x.com/${n}`,`https://twitter.com/${n}`])).then(t=>t==null?void 0:t.data).then(t=>t==null?void 0:t.holder.map(r=>r.address)).then(t=>e(t!=null?t:[])).catch(()=>e([]))})}var j={GetXUserTezosAddresses:(0,w.default)($,X,{id:D})};var H='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 248 248" fill="none" xmlns:v="https://vecta.io/nano" style="margin:auto;"><rect width="248" height="248" rx="124" fill="#8c89ff"/><path d="M103.16 132.89c-11.578 11.578-11.578 30.349-.001 41.926s30.349 11.578 41.926 0 11.578-30.348 0-41.926l-12.091 12.091a12.55 12.55 0 0 1-17.743 0L103.16 132.89zm82.958.162l.164-.163c11.577-11.577 11.577-30.348 0-41.926s-30.349-11.577-41.926 0-11.578 30.349 0 41.926l.132.131-.132-.132 12.091-12.092a12.55 12.55 0 0 1 17.743 0l12.092 12.092-.164.164zm-82.356-.036l.127-.127c11.578-11.577 11.578-30.348 0-41.926s-30.348-11.577-41.926 0-11.578 30.349 0 41.926l.167.166-.167-.167 12.092-12.092a12.55 12.55 0 0 1 17.743 0l12.091 12.092-.127.128z" fill-rule="evenodd" fill="#121212"/></svg>',a=new Map;function N(n){var r;let e=n.closest('[data-testid="tweet"]');if(!e)return null;let t=e.querySelector('a[href^="/"][role="link"]');return t&&((r=t.getAttribute("href"))==null?void 0:r.slice(1))||null}function b(n,e){var t;((t=e==null?void 0:e.length)!=null?t:0)>0&&(n.style.display="flex",n.addEventListener("click",()=>{window.open(`https://objkt.com/users/${e[0]}`)}))}function I(){document.querySelectorAll('[data-testid="bookmark"]').forEach(e=>{if((e==null?void 0:e.parentElement)===null||e.parentElement.querySelector(".sbjkt-button"))return;let t=N(e);if(t==null)return;let r=document.createElement("button");r.className="sbjkt-button",r.style.background="none",r.style.border="none",r.style.marginRight="18px",r.style.cursor="pointer",r.style.padding="0",r.style.width="16px",r.style.height="20px",r.innerHTML=H,r.style.display="none",e==null||e.parentElement.insertBefore(r,e),a.has(t)?b(r,a.get(t)):j.GetXUserTezosAddresses(t).then(i=>i).then(i=>{a.has(t)||a.set(t,i),b(r,i)})})}var C=new MutationObserver(I);C.observe(document.body,{childList:!0,subtree:!0});I();})();
